

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>12. Miscellaneous &mdash; Smart[Fleet] Platform 1.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="11. Best Practices" href="bestpractice.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Smart[Fleet] Platform
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Smart[Fleet] 플랫폼 소개</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">2. 주요 구성요소 (Entity Architecture)</a></li>
<li class="toctree-l1"><a class="reference internal" href="procedure.html">3. 서비스 세부 절차</a></li>
<li class="toctree-l1"><a class="reference internal" href="entity.html">4. 구성요소(Entity) 등록</a></li>
<li class="toctree-l1"><a class="reference internal" href="device.html">5. Device 연동 절차</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">6. API 규격</a></li>
<li class="toctree-l1"><a class="reference internal" href="message.html">7. 메시지 포맷</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataanalytics.html">8. Data Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">9. SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulator.html">10. 테스트용 시뮬레이터</a></li>
<li class="toctree-l1"><a class="reference internal" href="bestpractice.html">11. Best Practices</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. Miscellaneous</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#swing-interworking">12.1. Swing Interworking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-information">12.1.1. General Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#major-actions">12.1.2. Major Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">12.1.3. 일시 정지 해지 방법</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-interworking-using-kafka">12.2. Data Interworking using kafka</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#architecture">12.2.1. Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preliminary-process">12.2.2. Preliminary Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-structure">12.2.3. Data Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#message-format-for-sf-microtrip-topic">12.2.3.1. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-microtrip</span></code> Topic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-format-for-sf-trip-topic">12.2.3.2. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-trip</span></code> Topic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#message-format-for-sf-event-topic">12.2.3.3. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-event</span></code> Topic</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Smart[Fleet] Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>12. Miscellaneous</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/miscellaneous.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="miscellaneous">
<h1>12. Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h1>
<div class="section" id="swing-interworking">
<h2>12.1. Swing Interworking<a class="headerlink" href="#swing-interworking" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-information">
<h3>12.1.1. General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h3>
<p>Smart[Fleet]을 사용해서 SKT 단말의 개통 정보를 확인할 수 있습니다. 확인이 가능한 개통 정보는 다음과 같습니다.</p>
<ul class="simple">
<li>단말 개통에 따른 추가 정보 (IMEI, MDN, ICCID, IMSI 등)</li>
<li>단말의 현재 망 연동 현황 (망 연동 정상, 이용정지, 휴지정지, 해지정지, 직권해지, 일반해지 등)</li>
<li>단말이 현재 가입된 요금제 정보</li>
</ul>
<p>아래 예제는 차량 <code class="docutils literal notranslate"><span class="pre">vehicle</span></code> 및 소유자 <code class="docutils literal notranslate"><span class="pre">director</span></code> 가 단말에 정상적으로 매핑 된 후 SKT의 가입망으로 통해서
정상적으로 등록된 단말의 조회 정보입니다. 단말의 요금제 <code class="docutils literal notranslate"><span class="pre">subscription</span></code>, IMSI <code class="docutils literal notranslate"><span class="pre">imsi</span></code>,
IMEI <code class="docutils literal notranslate"><span class="pre">serialNo</span></code>, MDN <code class="docutils literal notranslate"><span class="pre">mdn</span></code> 이 정상적으로 등록된 것을 확인하실 수 있습니다.</p>
<p>추가로 단말의 현재 망 연동 상태를 알려주는 <code class="docutils literal notranslate"><span class="pre">nwStatus</span></code> 의 의미는 다음 표와 같습니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>00</td>
<td>미개통 및 SKT망 Cat.M1 연동이 아닌 단말</td>
</tr>
<tr class="row-odd"><td>01</td>
<td>정상 개통</td>
</tr>
<tr class="row-even"><td>02</td>
<td>이용 정지</td>
</tr>
<tr class="row-odd"><td>03</td>
<td>휴지 정지</td>
</tr>
<tr class="row-even"><td>04</td>
<td>해지 정지</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>직권 해지</td>
</tr>
<tr class="row-even"><td>06</td>
<td>일반 해지</td>
</tr>
<tr class="row-odd"><td>99</td>
<td>원인 불상의 오류 (<a class="reference external" href="mailto:admin&#37;&#52;&#48;smartfleet&#46;sktelecom&#46;com">admin<span>&#64;</span>smartfleet<span>&#46;</span>sktelecom<span>&#46;</span>com</a> 연락)</td>
</tr>
</tbody>
</table>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6802f7b0-0b34-11e8-9f2b-d3c31ebad2b2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;createdTime&quot;</span><span class="p">:</span> <span class="mi">1517918034596</span><span class="p">,</span>
    <span class="nt">&quot;vehicleId&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6678d540-0b34-11e8-9f2b-d3c31ebad2b2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;companyId&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;37bb69a0-fb64-11e7-b6fe-d3c31ebad2b2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;directorId&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6d91d980-0b34-11e8-9f2b-d3c31ebad2b2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;ACTIVATED&quot;</span><span class="p">,</span>
    <span class="nt">&quot;vendor&quot;</span><span class="p">:</span> <span class="s2">&quot;bbb&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;OBD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;additionalInfo&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;extra&quot;</span><span class="p">:</span> <span class="s2">&quot;infoTest&quot;</span><span class="p">,</span>
        <span class="nt">&quot;subscription&quot;</span><span class="p">:</span> <span class="s2">&quot;aaaa&quot;</span><span class="p">,</span>
        <span class="nt">&quot;imsi&quot;</span><span class="p">:</span> <span class="s2">&quot;450109900011234&quot;</span><span class="p">,</span>
        <span class="nt">&quot;iccid&quot;</span><span class="p">:</span> <span class="s2">&quot;8982050809121205771F&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;lastTripMsgType&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;activationRequired&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;vehicleNo&quot;</span><span class="p">:</span> <span class="s2">&quot;26나8999&quot;</span><span class="p">,</span>
    <span class="nt">&quot;serialNo&quot;</span><span class="p">:</span> <span class="s2">&quot;777888999000888&quot;</span><span class="p">,</span>
    <span class="nt">&quot;credentialsId&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;mdn&quot;</span><span class="p">:</span> <span class="s2">&quot;01203331234&quot;</span><span class="p">,</span>
    <span class="nt">&quot;nwStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;01&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="major-actions">
<h3>12.1.2. Major Actions<a class="headerlink" href="#major-actions" title="Permalink to this headline">¶</a></h3>
<p>아래 표는 고객이 개통, 명의 변경 등의 업무를 통해서 접수된 내용을 Smart[Fleet] 처리하는 내용을 명시합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Actions</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>개통</td>
<td>정상 적인 개통 후에는 개통 시 명시된 주요 파라미터들이 상기 예제 JSON과 같이 플랫폼에 적시됩니다. <br /> MDN을 발급 받은 경우에는 MDN 번호로 단말을 조회할 수 있습니다.</td>
</tr>
<tr class="row-odd"><td>기기 변경</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서 고객의 요청에 따른 기기 변경 시에는, <br /></div></blockquote>
<ol class="last arabic simple">
<li>기존 기기에 매핑된 차량 및 소유자의 정보를 변경되는 기기에 해제 합니다.</li>
<li>변경되는 기기에 상기 차량 및 소유자의 정보를 자동으로 매칭합니다.</li>
</ol>
</td>
</tr>
<tr class="row-even"><td>명의 변경</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서 고객의 요청에 따른 명의 변경 시에는,</div></blockquote>
<ul class="last simple">
<li>기존 단말의 등록 상태를 모두 삭제합니다. 명의 변경에 따른 소유자 변경 처리는 별도의 Application단에서 진행합니다.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>번호 변경</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서 고객의 요청에 따른 번호 변경 시에는,</div></blockquote>
<ul class="last simple">
<li>MDN 번호를 신규 번호로 업데이트 합니다.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>SIM 변경</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서 고객의 요청에 따른 SIM 변경 시에는,</div></blockquote>
<ul class="last simple">
<li>ICCID, IMSI를 교체한 정보로 업데이트 합니다.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>해지</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서 고객의 요청에 따른 단말 해지 시에는,</div></blockquote>
<ul class="last simple">
<li>등록된 단말의 상태 정보를 모두 삭제합니다. 해지에 따른 고객 정보 Backup은 Application단에서 진행합니다.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>정지</td>
<td><blockquote class="first">
<div>정상 상태에서 일시, 이용, 휴지, 해지 정지로 전환되는 상태에는,</div></blockquote>
<ul class="last simple">
<li>정지 상태의 상태를 단말의 <code class="docutils literal notranslate"><span class="pre">nwStatus</span></code> key에 업데이트 합니다.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>요금제 변경</td>
<td><blockquote class="first">
<div>정상 또는 정지 상태에서의 고객의 요청에 따른 요금제 변경 시에는,</div></blockquote>
<ul class="last simple">
<li>변경된 요금제 코드 정보를 단말 상태에 업데이트 합니다.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h3>12.1.3. 일시 정지 해지 방법<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>단말 중에는 개통 방식에 따라 초기에 일시정지 상태로 보급되는 경우가 있을 수 있습니다. 이번 절에서는 해당 단말의 일시정지 해지하여 정상 개통 상태로 변경하는 방식을 기술합니다.</p>
<p>일시정지 상태의 단말은 <a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/entity/#sensor-registration">Device Entity</a>  조회 시 상기 언급된 <code class="docutils literal notranslate"><span class="pre">nwStatus</span></code> 가 <code class="docutils literal notranslate"><span class="pre">02</span></code> 로 설정되어 있어야 하며,
일시정지를 위해서는 다음 API를 호출합니다. (해당 API 호출 권한은 해당 단말을 소유한 COMPANY_ADMIN 입니다)</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>POST</strong></td>
<td>/api/tre/v1_4/swing/unpause</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Request Body</li>
</ul>
<table border="1" class="table-width-fix table-width-full text-align-justify docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="10%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">M/O</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mdn</td>
<td>String</td>
<td>M</td>
<td>일시정지 해지를 위한 단말 MDN 번호</td>
</tr>
</tbody>
</table>
<p>해당 API 호출이 정상적으로 동작한 경우에는 대상 단말의 Device 상태를 조회하여 <code class="docutils literal notranslate"><span class="pre">nwStatus</span></code> 가 <code class="docutils literal notranslate"><span class="pre">01</span></code> 로 정상 변경되었는지 확인 부탁 드립니다. 만약 비정상적 동작으로 인하여 에러 코드를 리턴 받으신 경우에는
해당 단말 UUID와 리턴 코드와 함께 <a class="reference external" href="mailto:admin&#37;&#52;&#48;smartfleet&#46;sktelecom&#46;com">admin<span>&#64;</span>smartfleet<span>&#46;</span>sktelecom<span>&#46;</span>com</a> 으로 연락 부탁 드립니다.</p>
</div>
</div>
<div class="section" id="data-interworking-using-kafka">
<h2>12.2. Data Interworking using kafka<a class="headerlink" href="#data-interworking-using-kafka" title="Permalink to this headline">¶</a></h2>
<p>본 절에서는 Kafka를 통해서 Smart[Fleet]에 주행 데이터를 제공하는 방법에 대해서 기술합니다.
본 Kafka를 통한 연결은 고객사에서 단말을 직접 Smart[Fleet]에 연결하지 않고, Smart[Fleet]의 API를 사용하고자 할때 사용합니다.</p>
<div class="section" id="architecture">
<h3>12.2.1. Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/kafka_arc_01.png"><img alt="_images/kafka_arc_01.png" class="align-center" src="_images/kafka_arc_01.png" style="width: 70%;" /></a>
<p>Kafka 연동을 위해서 필요한 구조는 상단 그림에 명칭된 바와 같이
<code class="docutils literal notranslate"><span class="pre">고객사</span> <span class="pre">시스템</span> <span class="pre">-</span> <span class="pre">Customer's</span> <span class="pre">System</span></code> 와 <code class="docutils literal notranslate"><span class="pre">Smart[Fleet]</span></code> 으로 구성되고,
2개의 시스템은 아래와 같이 데이터를 연동합니다. (아래 번호는 그림의 적색원에 번호와 동일합니다)</p>
<ol class="arabic simple">
<li>고객사 시스템 자체 프로토콜을 통해서 단말과 고객사 백엔드 시스템을 연동하여 단말의 운행 데이터를 수집합니다.</li>
<li>고객사 시스템에서 1 단계에서 수집한 단말 데이터 중 데이터 분석을 위해서 필요한 데이터를 <code class="docutils literal notranslate"><span class="pre">Smart[Fleet]</span> <span class="pre">Kafka</span> <span class="pre">Cluster</span></code> 로 전달합니다.</li>
<li>2번 단계에서 수집된 단말 데이터를 기반으로 분석한 결과를 REST API를 통하여 고객사 시스템에서 호출합니다.</li>
</ol>
</div>
<div class="section" id="preliminary-process">
<h3>12.2.2. Preliminary Process<a class="headerlink" href="#preliminary-process" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/architecture/">Smart[Fleet] Entity Architecture</a> 에 따라
수신한 데이터로부터 연결된 차량 및 센서(디바이스)를 구분하기 위해서는 아래의 명시된 Smart[Fleet] Entity는 사전에 Smart[Fleet]에 등록되어 있어야 합니다.
이 외에 <code class="docutils literal notranslate"><span class="pre">Driver</span></code> , <code class="docutils literal notranslate"><span class="pre">Director</span></code> 및 <code class="docutils literal notranslate"><span class="pre">Deligated</span> <span class="pre">Entities</span></code> 를 고객사 시나리오에 따라 추가 하고자 할때는 <a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/entity/#sensor-registration">Device Entity</a> 를 참고하시어
언급된 추가 Entity들을 저장하시면 됩니다.</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/entity/#sensor-registration">Device Entity</a> <code class="docutils literal notranslate"><span class="pre">Mandatory</span></code></li>
<li><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/entity/#vehicle-registration">Vehicle Entity</a> <code class="docutils literal notranslate"><span class="pre">Mandatory</span></code></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="text-align-justify last">Kafka 연동이 필요하신 경우에는 접속을 위해서 <a class="reference external" href="mailto:admin&#37;&#52;&#48;smartfleet&#46;sktelecom&#46;com">admin<span>&#64;</span>smartfleet<span>&#46;</span>sktelecom<span>&#46;</span>com</a> 으로 요청 부탁 드립니다.  Kafka 연동에 필요한 사항을 공지드리겠습니다.</p>
</div>
</div>
<div class="section" id="data-structure">
<h3>12.2.3. Data Structure<a class="headerlink" href="#data-structure" title="Permalink to this headline">¶</a></h3>
<p>우선 Kafka를 통해서 Smart[Fleet]에 연동을 위해서는 아래의 토픽을 사용합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Topic Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sf-microtrip</td>
<td>단말에서 운행 시작 후 주기적으로 보내는 <code class="docutils literal notranslate"><span class="pre">microtrip</span></code> 메세지를 포함하는 토픽으로
<a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/device/#device-procedure">Device Procedure</a> 중
<code class="docutils literal notranslate"><span class="pre">microtrip</span></code> 단계에 해당하는 메시지를 포함합니다.</td>
</tr>
<tr class="row-odd"><td>sf-trip</td>
<td>단말에서 운행 종료 후 보내는 <code class="docutils literal notranslate"><span class="pre">trip</span></code> 메세지를 포함하는 토픽으로
<a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/device/#device-procedure">Device Procedure</a> 중
<code class="docutils literal notranslate"><span class="pre">trip</span></code> 단계에 해당하는 메시지를 포함합니다.</td>
</tr>
<tr class="row-even"><td>sf-event</td>
<td>단말에서 운행 중 전송하는 <code class="docutils literal notranslate"><span class="pre">event</span></code> 메세지를 포함하는 토픽으로
<a class="reference external" href="https://smart-fleet-docs.readthedocs.io/ko/latest/device/#event-data">Event Data</a> 중
<code class="docutils literal notranslate"><span class="pre">Publish</span> <span class="pre">Vehicle</span> <span class="pre">Event</span></code> 단계에 해당하는 메시지를 포함합니다.</td>
</tr>
</tbody>
</table>
<p>각 토픽에 전달해야하는 메시지 구조는 다음과 같으며, JSON Format을 따릅니다.</p>
<div class="section" id="message-format-for-sf-microtrip-topic">
<h4>12.2.3.1. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-microtrip</span></code> Topic<a class="headerlink" href="#message-format-for-sf-microtrip-topic" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>M</td>
<td>String</td>
<td>아래 <code class="docutils literal notranslate"><span class="pre">Microtrip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> 참조</td>
</tr>
<tr class="row-odd"><td>msgType</td>
<td>M</td>
<td>String</td>
<td>메시지 타입 <code class="docutils literal notranslate"><span class="pre">microtrip</span></code></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">Microtrip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="7%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>date</td>
<td>M</td>
<td>String</td>
<td>전송 시간 (YYYY-MM-DDTHH:MM)</td>
</tr>
<tr class="row-odd"><td>deviceType</td>
<td>M</td>
<td>String</td>
<td>디바이스 타입 (Smart[Fleet] 지원 단말 국한)</td>
</tr>
<tr class="row-even"><td>companyID</td>
<td>M</td>
<td>String</td>
<td>할당받은 <code class="docutils literal notranslate"><span class="pre">company</span></code> 식별자</td>
</tr>
<tr class="row-odd"><td>payload</td>
<td>M</td>
<td>String</td>
<td><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/device/#device-procedure">Device Procedure</a>
정의된 각 단말에 맞는 Microtrip 규격을 따라 운행 정보 기입합니다. 추가로 해당 Payload는
<a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/message/#aggregated-microtrip">Aggregated Microtrip</a>
형태로 다수의 Microtrip이 JSON Array로 묶일 수 있습니다.</td>
</tr>
<tr class="row-even"><td>ts</td>
<td>M</td>
<td>String</td>
<td>Microtrip 수집 시간 (Timestamp msec)</td>
</tr>
<tr class="row-odd"><td>createdTime</td>
<td>M</td>
<td>String</td>
<td>해당 메시지가 고객사 시스템에 등록된 시간 (Timestamp in milliseconds)</td>
</tr>
<tr class="row-even"><td>tripId</td>
<td>M</td>
<td>String</td>
<td>다수의 Microtrip이 하나의 Trip으로 묶이면 하나의 Trip으로 식별하여 명시
고객사에서 UUID 형태로 별도 관리하시어 보내시면 됩니다.</td>
</tr>
<tr class="row-odd"><td>microTripId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 Microtrip ID의 식별자
고객사에서 UUID 형태로 별도 관리하시어 보내시면 됩니다.</td>
</tr>
<tr class="row-even"><td>vehicleId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 연결된 차량의 식별자</td>
</tr>
<tr class="row-odd"><td>sensorId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 식별자</td>
</tr>
</tbody>
</table>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;date&quot;</span><span class="p">:</span><span class="s2">&quot;2018-07-02T15:10&quot;</span><span class="p">,</span>
        <span class="nt">&quot;deviceType&quot;</span><span class="p">:</span><span class="s2">&quot;BLACKBOX&quot;</span><span class="p">,</span>
        <span class="nt">&quot;companyId&quot;</span><span class="p">:</span><span class="s2">&quot;9340ba10-37ae-11e8-ad7d-833dc5b9c077&quot;</span><span class="p">,</span>
        <span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="s2">&quot;[</span>
<span class="s2">            {\&quot;tid\&quot;:664,\&quot;try\&quot;:1,\&quot;lat\&quot;:34.812622,\&quot;lon\&quot;:126.417328,\&quot;sp\&quot;:0,\&quot;clt\&quot;:1530511744000},</span>
<span class="s2">            {\&quot;tid\&quot;:664,\&quot;try\&quot;:1,\&quot;lat\&quot;:34.812622,\&quot;lon\&quot;:126.417328,\&quot;sp\&quot;:0,\&quot;clt\&quot;:1530511746000},</span>
<span class="s2">            {\&quot;tid\&quot;:664,\&quot;try\&quot;:1,\&quot;lat\&quot;:34.812622,\&quot;lon\&quot;:126.417328,\&quot;sp\&quot;:0,\&quot;clt\&quot;:1530511748000},</span>
<span class="s2">            {\&quot;tid\&quot;:664,\&quot;try\&quot;:1,\&quot;lat\&quot;:34.812622,\&quot;lon\&quot;:126.417328,\&quot;sp\&quot;:0,\&quot;clt\&quot;:1530511750000}</span>
<span class="s2">        ]&quot;</span><span class="p">,</span>
        <span class="nt">&quot;createdTime&quot;</span><span class="p">:</span><span class="mi">1530511807210</span><span class="p">,</span>
        <span class="nt">&quot;tripId&quot;</span><span class="p">:</span><span class="s2">&quot;715e6920-7db7-11e8-8dc3-833dc5b9c077&quot;</span><span class="p">,</span>
        <span class="nt">&quot;microTripId&quot;</span><span class="p">:</span><span class="s2">&quot;917014a0-7dbe-11e8-8dc3-833dc5b9c077&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vehicleId&quot;</span><span class="p">:</span><span class="s2">&quot;ea9e81a0-3c65-11e8-a83e-69177a4f662b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="mi">1530511802000</span><span class="p">,</span>
        <span class="nt">&quot;sensorId&quot;</span><span class="p">:</span><span class="s2">&quot;ece013c0-37b0-11e8-bc18-956d65b68a0a&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;msgType&quot;</span><span class="p">:</span><span class="s2">&quot;microtrip&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="message-format-for-sf-trip-topic">
<h4>12.2.3.2. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-trip</span></code> Topic<a class="headerlink" href="#message-format-for-sf-trip-topic" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>M</td>
<td>String</td>
<td>아래 <code class="docutils literal notranslate"><span class="pre">Trip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> 참조</td>
</tr>
<tr class="row-odd"><td>msgType</td>
<td>M</td>
<td>String</td>
<td>메시지 타입 <code class="docutils literal notranslate"><span class="pre">trip</span></code></td>
</tr>
<tr class="row-even"><td>latestTrip</td>
<td>M</td>
<td>String</td>
<td>아래 <code class="docutils literal notranslate"><span class="pre">latestTrip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> 참조</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">Trip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>deviceType</td>
<td>M</td>
<td>String</td>
<td>디바이스 타입 (Smart[Fleet] 지원 단말 국한)</td>
</tr>
<tr class="row-odd"><td>companyID</td>
<td>M</td>
<td>String</td>
<td>할당받은 <code class="docutils literal notranslate"><span class="pre">company</span></code> 식별자</td>
</tr>
<tr class="row-even"><td>payload</td>
<td>M</td>
<td>String</td>
<td><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/device/#device-procedure">Device Procedure</a>
정의된 각 단말에 맞는 Trip 규격을 따라 운행 정보 기입합니다.</td>
</tr>
<tr class="row-odd"><td>startTs</td>
<td>M</td>
<td>String</td>
<td>운행 시작 시간 (Timestamp msec)</td>
</tr>
<tr class="row-even"><td>endTs</td>
<td>M</td>
<td>String</td>
<td>운행 종료 시간 (Timestamp msec)</td>
</tr>
<tr class="row-odd"><td>startDt</td>
<td>O</td>
<td>String</td>
<td>운행 시작 시간 (YYYY-MM-DD HH:MM:SS)</td>
</tr>
<tr class="row-even"><td>endDt</td>
<td>O</td>
<td>String</td>
<td>운행 종료 시간 (YYYY-MM-DD HH:MM:SS)</td>
</tr>
<tr class="row-odd"><td>createdTime</td>
<td>M</td>
<td>String</td>
<td>해당 메시지가 고객사 시스템에 등록된 시간 (Timestamp in milliseconds)</td>
</tr>
<tr class="row-even"><td>tripId</td>
<td>M</td>
<td>String</td>
<td>다수의 Microtrip이 하나의 Trip으로 묶이면 하나의 Trip으로 식별하여 명시
고객사에서 UUID 형태로 별도 관리하시어 보내시면 됩니다.</td>
</tr>
<tr class="row-odd"><td>vehicleId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 연결된 차량의 식별자</td>
</tr>
<tr class="row-even"><td>sensorId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 식별자</td>
</tr>
<tr class="row-odd"><td>userId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 운전자 식별자 (<code class="docutils literal notranslate"><span class="pre">driver</span></code> 가 적용되었을 경우)</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">latestTrip</span> <span class="pre">Message</span> <span class="pre">Format</span></code> Table</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;deviceType&quot;</span><span class="p">:</span><span class="s2">&quot;BLACKBOX&quot;</span><span class="p">,</span>
        <span class="nt">&quot;companyId&quot;</span><span class="p">:</span><span class="s2">&quot;9340ba10-37ae-11e8-ad7d-833dc5b9c077&quot;</span><span class="p">,</span>
        <span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="s2">&quot;{\&quot;tid\&quot;:537,\&quot;dis\&quot;:2142,\&quot;stlat\&quot;:37.45194,\&quot;stlon\&quot;:127.000317,\&quot;edlat\&quot;:37.448247,\&quot;edlon\&quot;:127.006768}&quot;</span><span class="p">,</span>
        <span class="nt">&quot;endTs&quot;</span><span class="p">:</span><span class="mi">1530514616000</span><span class="p">,</span>
        <span class="nt">&quot;createdTime&quot;</span><span class="p">:</span><span class="mi">1530513694199</span><span class="p">,</span>
        <span class="nt">&quot;startDt&quot;</span><span class="p">:</span><span class="s2">&quot;2018-07-02 15:41:29&quot;</span><span class="p">,</span>
        <span class="nt">&quot;endDt&quot;</span><span class="p">:</span><span class="s2">&quot;2018-07-02 15:56:56&quot;</span><span class="p">,</span>
        <span class="nt">&quot;tripId&quot;</span><span class="p">:</span><span class="s2">&quot;f62bc070-7dc2-11e8-96b3-bf7af28e956c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;startTs&quot;</span><span class="p">:</span><span class="mi">1530513689000</span><span class="p">,</span>
        <span class="nt">&quot;vehicleId&quot;</span><span class="p">:</span><span class="s2">&quot;33baba10-3c6c-11e8-a83e-69177a4f662b&quot;</span><span class="p">,</span>
        <span class="nt">&quot;userId&quot;</span><span class="p">:</span><span class="s2">&quot;13814000-1dd2-11b2-8080-808080808080&quot;</span><span class="p">,</span>
        <span class="nt">&quot;sensorId&quot;</span><span class="p">:</span><span class="s2">&quot;ece60730-37b0-11e8-ad7d-833dc5b9c077&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;latestTrip&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;deviceType&quot;</span><span class="p">:</span><span class="s2">&quot;BLACKBOX&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;msgType&quot;</span><span class="p">:</span><span class="s2">&quot;trip&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="message-format-for-sf-event-topic">
<h4>12.2.3.3. Message Format for <code class="docutils literal notranslate"><span class="pre">sf-event</span></code> Topic<a class="headerlink" href="#message-format-for-sf-event-topic" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="8%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>data</td>
<td>M</td>
<td>String</td>
<td>아래 <code class="docutils literal notranslate"><span class="pre">Event</span> <span class="pre">Message</span> <span class="pre">Format</span></code> 참조</td>
</tr>
<tr class="row-odd"><td>msgType</td>
<td>M</td>
<td>String</td>
<td>메시지 타입 <code class="docutils literal notranslate"><span class="pre">event</span></code></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">Event</span> <span class="pre">Message</span> <span class="pre">Format</span></code> Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="6%" />
<col width="7%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">M/O</th>
<th class="head">Type</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>deviceType</td>
<td>M</td>
<td>String</td>
<td>디바이스 타입 (Smart[Fleet] 지원 단말 국한)</td>
</tr>
<tr class="row-odd"><td>companyID</td>
<td>M</td>
<td>String</td>
<td>할당받은 <code class="docutils literal notranslate"><span class="pre">company</span></code> 식별자</td>
</tr>
<tr class="row-even"><td>payload</td>
<td>M</td>
<td>String</td>
<td><a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/device/#device-procedure">Device Procedure</a>
정의된 각 단말에 맞는 Microtrip 규격을 따라 운행 정보 기입합니다. 추가로 해당 Payload는
<a class="reference external" href="http://smart-fleet-docs.readthedocs.io/ko/latest/message/#aggregated-microtrip">Aggregated Microtrip</a>
형태로 다수의 Microtrip이 JSON Array로 묶일 수 있습니다.</td>
</tr>
<tr class="row-odd"><td>eventTs</td>
<td>M</td>
<td>String</td>
<td>이벤트 발생 시간 (Timestamp msec)</td>
</tr>
<tr class="row-even"><td>eventDt</td>
<td>O</td>
<td>String</td>
<td>이벤트 발생 시간 (YYYY-MM-DD HH:MM:SS)</td>
</tr>
<tr class="row-odd"><td>createdTime</td>
<td>M</td>
<td>String</td>
<td>해당 메시지가 고객사 시스템에 등록된 시간 (Timestamp in milliseconds)</td>
</tr>
<tr class="row-even"><td>tripId</td>
<td>M</td>
<td>String</td>
<td>다수의 Microtrip이 하나의 Trip으로 묶이면 하나의 Trip으로 식별하여 명시
고객사에서 UUID 형태로 별도 관리하시어 보내시면 됩니다.</td>
</tr>
<tr class="row-odd"><td>eventId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에서 발생한 이벤트의 식별자</td>
</tr>
<tr class="row-even"><td>vehicleId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 연결된 차량의 식별자</td>
</tr>
<tr class="row-odd"><td>sensorId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 센서에 식별자</td>
</tr>
<tr class="row-even"><td>userId</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에 등록된 운전자 식별자 (<code class="docutils literal notranslate"><span class="pre">driver</span></code> 가 적용되었을 경우)</td>
</tr>
<tr class="row-odd"><td>ty</td>
<td>M</td>
<td>String</td>
<td>Smart[Fleet]에서 이벤트를 구분하는
<a class="reference external" href="https://smart-fleet-docs.readthedocs.io/ko/latest/message/#message-format-for-sensor">ty</a> 값</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="bestpractice.html" class="btn btn-neutral" title="11. Best Practices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright SK TELECOM.LTD. ALL RIGHTS RESERVED..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>